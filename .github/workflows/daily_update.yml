name: Daily Golf Trend Update â›³

# 1. ì–¸ì œ ì‹¤í–‰í• ê¹Œ?
on:
  schedule:
    # â° í•œêµ­ ì‹œê°„ ìƒˆë²½ 6ì‹œ (UTC ê¸°ì¤€ 21ì‹œ) ì‹¤í–‰
    - cron: '0 21 * * *'
  # ğŸ‘‡ (í…ŒìŠ¤íŠ¸ìš©) ê¹ƒí—ˆë¸Œ ì›¹ì—ì„œ ë²„íŠ¼ ëˆŒëŸ¬ì„œ ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•˜ê²Œ í•¨
  workflow_dispatch:

jobs:
  update-data:
    runs-on: ubuntu-latest
    
    steps:
    # 1. ì½”ë“œ ë‚´ë ¤ë°›ê¸°
    - name: Checkout code
      uses: actions/checkout@v3

    # 2. íŒŒì´ì¬ ì„¤ì¹˜
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    # 3. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ (requirements.txt í•„ìˆ˜!)
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    # 4. ìˆ˜ì§‘ ì½”ë“œ ì‹¤í–‰ (ì—¬ê¸°ê°€ í•µì‹¬!)
    # env: ìª½ì— ì•„ê¹Œ ì €ì¥í•œ ë¹„ë°€í‚¤ë¥¼ ë„˜ê²¨ì¤ë‹ˆë‹¤.
    - name: Run collection script
      env:
        YOUTUBE_API_KEY: ${{ secrets.YOUTUBE_API_KEY }}
      run: |
        python golf_DB.py

    # 5. ë³€ê²½ëœ golf.db ì €ì¥í•˜ê³  ê¹ƒí—ˆë¸Œì— ì˜¬ë¦¬ê¸°
    - name: Commit and push changes
      run: |
        git config --global user.name "GolfBot"
        git config --global user.email "bot@insight-golf.com"
        git add golf.db
        # ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œë§Œ ì»¤ë°‹ (ì—ëŸ¬ ë°©ì§€)
        git commit -m "ğŸ¤– Daily Data Update (Auto)" || exit 0
        git push
       
